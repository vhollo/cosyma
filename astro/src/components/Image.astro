---
import { getSanityImageUrl, formatBlogPostDate } from '../utils/helpers.js'
const { image, radius, lazy, double } = Astro.props
//console.log('IMAGE',Astro.props.lazy)
if (!image?.asset) return
let src// = getSanityImageUrl(image)

let { w } = Astro.props
w = w || 720

let { h } = Astro.props
h = h || false
let { ratio } = Astro.props
if (ratio) h = w * ratio / 100

if (h) {
  src = getSanityImageUrl(image).width(w).height(h).format('webp').url()
} else {
  src = getSanityImageUrl(image).width(w).format('webp').url()
}

const { caption } = image || {}
//console.log('IMAGE', src)
//let path = `/assets/${folder}/${src}`
let lang = 'hu'//, lazy, radius
---
<!--{folder && src && -->
{src && 
  <figure class = {`${(radius ? 'radius ' : '')} ${(double ? 'double' : '')}`}>
    <img loading={lazy} src={src} alt=""/>
    {!!caption && <figcaption lang={lang}>{caption[lang] || caption}</figcaption>}
  </figure>
}

<style>
	figure {
    max-width: var(--figurewidth, 100%);
		margin: 1rem auto;
    /*max-height: 30vh;*/
    width: auto;
	}
	.radius img {
    /* nem kell */
    /*border-radius: 0.5rem;*/
    /*max-width:none;*/
	}
	img, figcaption {
		margin: 0 auto 1rem;
    box-shadow: var(--shadow) 0 0 0.5rem;
    --figurewidth: 32ch;
    max-width: 100%;
	}
  .double img {
    max-height: 45vh;
  }
</style>